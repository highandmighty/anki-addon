function ravMilimParser(){var e=document.getSelection().getRangeAt(0).cloneContents();addBrackets(e,"span.main font"),copyToClipboard(e.textContent.trim().replace(/•\s/g,"    - "))}function processExplanation(e){var t="";let o=e.querySelector('[class*="WordExplain_explain"]');addBrackets(o,'[class*="WordExplain_BOLD"]');let n=e.querySelector("span"),r=n?n.textContent.trim():"",a=o?o.textContent.trim():"";t+=`${r} ${a}
`;let l=e.querySelectorAll('[class*="Search_full_analyze_explanation_example"] li');return l.forEach(e=>{t+=`    - ${e.textContent.trim()}
`}),t}function ravMilimParser_v2(){if(!document.querySelector('button[data-text="הסבר"][class*="Tabs_tab_selected"]')){copyToClipboard(window.getSelection().toString());return}var e="",t=document.getSelection().getRangeAt(0).cloneContents(),o=t.querySelectorAll('[class*="Search_full_analyze_explanation_group"]');0===o.length?e+=processExplanation(t):o.forEach(t=>{let o=t.querySelector('[class*="Search_full_analyze_explanation"]:not([class*="group"]):not([class*="example"])');o&&(e+=processExplanation(o))}),copyToClipboard(e.trim())}function hebrewAcademyParser(){copyToClipboard(window.getSelection().toString().trim().split("\n").map(function(e,t){return t+1+". "+e.trim()}).join("\n"))}function milogParser(){var e=document.getSelection().getRangeAt(0).cloneContents(),t="";console.log(e);var o=e.querySelectorAll(".ent_para");if(0===o.length){copyToClipboard(`1. ${e.textContent}`);return}o.forEach((e,o)=>{t+=`${o+1}. ${e.querySelector(".ent_para_text").textContent.trim()}
`}),copyToClipboard(t=t.trim().replace(/\s"([^"]+)"/g,"\n    - $1"))}function addBrackets(e,t){e.querySelectorAll(t).forEach(e=>{let t=document.createRange().createContextualFragment(`(${e.innerHTML})`);e.parentNode.replaceChild(t,e)})}function wiktionaryParser(){var e=document.getSelection().getRangeAt(0).cloneContents(),t=document.createElement("div");t.id="top",t.appendChild(e);var o="",n=1;console.log(e);var r=t.querySelectorAll("#top > li");0===r.length&&(r=[t]),r.forEach(function(e){if(!e.closest("ul")){var t=e.cloneNode(!0);addBrackets(t,'span[typeof="mw:Transclusion"]');var r=t.querySelector("ul");r&&r.remove(),o+=n+". "+t.textContent.trim()+"\n",e.querySelectorAll("ul > li").forEach(function(e){o+="    - "+e.textContent.trim()+"\n"}),n++}}),copyToClipboard(o.trim())}function copyToClipboard(e){console.log(e),navigator.clipboard.writeText(e)}document.addEventListener("copy",function(e){if(console.log("copy triggered!"),"www.ravmilim.com"===window.location.hostname)ravMilimParser_v2();else if("hebrew-academy.org.il"===window.location.hostname)hebrewAcademyParser();else if("milog.co.il"===window.location.hostname)milogParser();else if("he.wiktionary.org"===window.location.hostname)wiktionaryParser();else{console.log("not a valid host");return}e.preventDefault()});